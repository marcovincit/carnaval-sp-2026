<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#ffffff" id="meta-theme">
  <script>
    (function(){var m=document.getElementById('meta-theme');
    function u(){m.content=window.matchMedia('(prefers-color-scheme:dark)').matches?'#000000':'#ffffff'}
    u();window.matchMedia('(prefers-color-scheme:dark)').addEventListener('change',u);})();
  </script>
  <meta name="description" content="Mapa interativo com 327+ blocos de Carnaval de rua de S√£o Paulo 2026. Datas, hor√°rios, trajetos e localiza√ß√£o. Pr√©-carnaval, carnaval e p√≥s-carnaval.">
  <title>Blocos de Carnaval SP 2026 ‚Äî Mapa com 327+ Blocos de Rua</title>
  <meta name="keywords" content="blocos de carnaval SP 2026, carnaval de rua S√£o Paulo, programa√ß√£o carnaval SP 2026, mapa blocos carnaval, blocos de rua SP, agenda carnaval S√£o Paulo 2026">
  <meta name="author" content="Carnaval SP 2026">
  <meta name="robots" content="index, follow">
  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Mapa de Blocos de Carnaval SP 2026 ‚Äî 327+ Blocos">
  <meta property="og:description" content="Encontre blocos de carnaval de rua em S√£o Paulo 2026. Mapa interativo com 327+ blocos por data, tipo e localiza√ß√£o.">
  <meta property="og:locale" content="pt_BR">
  <meta property="og:site_name" content="Carnaval SP 2026">
  <!-- og:url e og:image: definir ap√≥s publica√ß√£o -->
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Mapa de Blocos de Carnaval SP 2026 ‚Äî 327+ Blocos">
  <meta name="twitter:description" content="Encontre blocos de carnaval de rua em S√£o Paulo 2026. Mapa interativo com 327+ blocos.">
  <!-- twitter:image: definir ap√≥s publica√ß√£o -->
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé≠</text></svg>">
  <!-- Structured Data -->
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"Event","name":"Carnaval de Rua de S√£o Paulo 2026","description":"Programa√ß√£o completa com 327+ blocos de carnaval de rua em S√£o Paulo. Pr√©-carnaval (07-08/02), carnaval (14-17/02) e p√≥s-carnaval (21-22/02) de 2026.","startDate":"2026-02-06","endDate":"2026-02-22","eventStatus":"https://schema.org/EventScheduled","eventAttendanceMode":"https://schema.org/OfflineEventAttendanceMode","location":{"@type":"City","name":"S√£o Paulo","address":{"@type":"PostalAddress","addressLocality":"S√£o Paulo","addressRegion":"SP","addressCountry":"BR"}},"organizer":{"@type":"Organization","name":"Prefeitura de S√£o Paulo"},"offers":{"@type":"Offer","price":"0","priceCurrency":"BRL","availability":"https://schema.org/InStock"},"subEvent":[{"@type":"Event","name":"Bicho Maluco Beleza, com Alceu Valen√ßa","startDate":"2026-02-07T14:00:00-03:00","location":{"@type":"Place","name":"Vila Mariana, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.589178,"longitude":-46.634668}}},{"@type":"Event","name":"Quem Pede, Pede, com Ivete Sangalo","startDate":"2026-02-07T09:00:00-03:00","location":{"@type":"Place","name":"Parque Ibirapuera, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.587713,"longitude":-46.658521}}},{"@type":"Event","name":"Bloco Skol, com Calvin Harris","startDate":"2026-02-08T11:00:00-03:00","location":{"@type":"Place","name":"Consola√ß√£o, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.557818,"longitude":-46.660537}}},{"@type":"Event","name":"Monobloco","startDate":"2026-02-08T16:00:00-03:00","location":{"@type":"Place","name":"Vila Mariana, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.589178,"longitude":-46.634668}}},{"@type":"Event","name":"Agrada Gregos / TikTok (Gloria Groove)","startDate":"2026-02-14T13:00:00-03:00","location":{"@type":"Place","name":"Obelisco do Ibirapuera, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.5875,"longitude":-46.6575}}},{"@type":"Event","name":"Bloco Bem Sertanejo (Michel Tel√≥)","startDate":"2026-02-15T12:00:00-03:00","location":{"@type":"Place","name":"Vila Mariana, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.589178,"longitude":-46.634668}}},{"@type":"Event","name":"Bloco da Pocah","startDate":"2026-02-15T13:00:00-03:00","location":{"@type":"Place","name":"Obelisco do Ibirapuera, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.5882,"longitude":-46.6582}}},{"@type":"Event","name":"Bloco da Pabllo (Pabllo Vittar)","startDate":"2026-02-16T13:00:00-03:00","location":{"@type":"Place","name":"Av. Pedro √Ålvares Cabral - Ibirapuera, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.587,"longitude":-46.657}}},{"@type":"Event","name":"Galo da Madrugada","startDate":"2026-02-17T10:00:00-03:00","location":{"@type":"Place","name":"Vila Mariana, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.589178,"longitude":-46.634668}}},{"@type":"Event","name":"Navio Pirata (BaianaSystem)","startDate":"2026-02-21T15:00:00-03:00","location":{"@type":"Place","name":"Obelisco do Ibirapuera, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.5878,"longitude":-46.6578}}},{"@type":"Event","name":"Bloco Afro Il√∫ Ob√° De Min","startDate":"2026-02-14T19:00:00-03:00","location":{"@type":"Place","name":"P√ßa. da Rep√∫blica, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.5432,"longitude":-46.6428}}},{"@type":"Event","name":"Bloco Sargento Pimenta","startDate":"2026-02-07T12:00:00-03:00","location":{"@type":"Place","name":"Pinheiros, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.567215,"longitude":-46.701952}}},{"@type":"Event","name":"Bloco Emo","startDate":"2026-02-14T13:00:00-03:00","location":{"@type":"Place","name":"Av. Paulo VI, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.548,"longitude":-46.685}}},{"@type":"Event","name":"Bloco Feminista","startDate":"2026-02-08T15:00:00-03:00","location":{"@type":"Place","name":"Vila Perus, S√£o Paulo","geo":{"@type":"GeoCoordinates","latitude":-23.416689,"longitude":-46.746414}}}]}</script>
  <!-- JS detection -->
  <script>document.documentElement.classList.add('js')</script>
  <!-- Preconnect -->
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="preconnect" href="https://a.basemaps.cartocdn.com" crossorigin>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
  <style>
    :root {
      --sp-1: 4px; --sp-2: 8px; --sp-3: 12px; --sp-4: 16px; --sp-5: 20px;
      --sal: env(safe-area-inset-left, 0px);
      --sar: env(safe-area-inset-right, 0px);
      --header-h: 44px;
      --filter-h: 36px;
      --sat: env(safe-area-inset-top, 0px);
      --sab: env(safe-area-inset-bottom, 0px);
      --font: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'SF Pro Display', system-ui, sans-serif;
      --fs-caption3: 10px;
      --fs-caption2: 11px;
      --fs-caption1: 12px;
      --fs-footnote: 13px;
      --fs-subhead: 15px;
      --fs-body: 17px;
      --fs-title3: 20px;
      --color-bg: #ffffff;
      --color-surface: #ffffff;
      --color-surface-solid: #ffffff;
      --text-primary: #000000;
      --text-secondary: #3c3c43;
      --text-tertiary: #8e8e93;
      --text-on-accent: #ffffff;
      --accent: #007AFF;
      --accent-bg: rgba(0, 122, 255, 0.12);
      --success: #34C759;
      --fill: rgba(120, 120, 128, 0.12);
      --fill-secondary: rgba(120, 120, 128, 0.08);
      --fill-hover: rgba(120, 120, 128, 0.2);
      --focus-ring: 0 0 0 3px rgba(0, 122, 255, 0.35);
      --tooltip-bg: #ffffff;
      --separator: rgba(60, 60, 67, 0.12);
      --r-sm: 8px; --r-md: 10px; --r-lg: 14px; --r-full: 9999px;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --color-bg: #000000;
        --color-surface: #000000;
        --color-surface-solid: #000000;
        --text-primary: #ffffff;
        --text-secondary: #ebebf5;
        --text-tertiary: #8e8e93;
        --accent: #0A84FF;
        --accent-bg: rgba(10, 132, 255, 0.18);
        --success: #30D158;
        --fill: rgba(120, 120, 128, 0.36);
        --fill-secondary: rgba(120, 120, 128, 0.24);
        --fill-hover: rgba(120, 120, 128, 0.48);
        --focus-ring: 0 0 0 3px rgba(10, 132, 255, 0.45);
        --tooltip-bg: #000000;
        --separator: rgba(84, 84, 88, 0.36);
      }
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      height: 100%; overflow: hidden;
      font-family: var(--font); color: var(--text-primary); background: var(--color-bg);
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    }
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
    :focus { outline: none; }
    :focus-visible { outline: none; box-shadow: var(--focus-ring); }

    .skip-link {
      position: fixed; top: -100%; left: var(--sp-4); z-index: 10000;
      padding: var(--sp-2) var(--sp-4); background: var(--accent);
      color: var(--text-on-accent); font-size: var(--fs-footnote);
      font-weight: 600; border-radius: 0 0 var(--r-sm) var(--r-sm); text-decoration: none;
    }
    .skip-link:focus { top: 0; }

    #map { position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1; }

    /* Chrome */
    #chrome {
      position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
      padding-top: var(--sat);
      padding-bottom: 8px;
      background: var(--color-surface);
    }
    .header {
      display: flex; align-items: center; justify-content: space-between;
      height: var(--header-h); padding: 0 var(--sp-4);
    }
    .header h1 {
      font-size: var(--fs-body); font-weight: 600; letter-spacing: -0.2px;
    }
    .header-actions { display: flex; align-items: center; gap: var(--sp-1); }
    .icon-btn {
      width: 36px; height: 36px; border: none;
      background: var(--fill-secondary); border-radius: var(--r-full);
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      -webkit-tap-highlight-color: transparent; color: var(--accent);
      position: relative;
    }
    .icon-btn::before {
      content: ''; position: absolute; top: 50%; left: 50%;
      width: 44px; height: 44px; transform: translate(-50%, -50%);
    }
    .icon-btn:hover { background: var(--fill); }
    .icon-btn svg { width: 17px; height: 17px; }
    .icon-btn.active { background: var(--accent); color: var(--text-on-accent); }

    /* Filters */
    .filter-row {
      display: flex; align-items: center; gap: var(--sp-1);
      min-height: var(--filter-h); padding: var(--sp-1) var(--sp-4);
      overflow-x: auto; -webkit-overflow-scrolling: touch; scrollbar-width: none;
      -webkit-mask-image: linear-gradient(to right, transparent, black 16px, black calc(100% - 16px), transparent);
      mask-image: linear-gradient(to right, transparent, black 16px, black calc(100% - 16px), transparent);
    }
    .filter-row::-webkit-scrollbar { display: none; }

    .type-chip {
      display: inline-flex; align-items: center; gap: var(--sp-1);
      padding: var(--sp-2) var(--sp-3); border-radius: var(--r-full); border: none;
      background: var(--fill-secondary); cursor: pointer; min-height: 36px;
      font-family: var(--font); font-size: var(--fs-caption1); font-weight: 500;
      color: var(--text-primary); user-select: none;
      -webkit-tap-highlight-color: transparent; white-space: nowrap; flex-shrink: 0;
    }
    .type-chip:hover { background: var(--fill); }
    .type-chip .dot { width: 8px; height: 8px; border-radius: var(--r-full); flex-shrink: 0; }
    .type-chip.inactive, .type-chip[aria-pressed="false"] { opacity: 0.32; }

    .date-pill {
      display: inline-flex; flex-direction: column; align-items: center;
      padding: var(--sp-2) var(--sp-3); border-radius: var(--r-lg); border: none;
      background: var(--fill-secondary); cursor: pointer; min-width: 48px; min-height: 36px;
      font-family: var(--font); user-select: none;
      -webkit-tap-highlight-color: transparent; flex-shrink: 0;
      justify-content: center;
    }
    .date-pill:hover { background: var(--fill); }
    .date-pill[aria-pressed="true"] { background: var(--accent); }
    .date-pill .day-name {
      font-size: var(--fs-caption2); font-weight: 600;
      color: var(--text-primary); line-height: 1.35;
    }
    .date-pill .day-num {
      font-size: var(--fs-caption3); color: var(--text-tertiary);
      line-height: 1.35; font-weight: 500;
    }
    .date-pill[aria-pressed="true"] .day-name,
    .date-pill[aria-pressed="true"] .day-num { color: var(--text-on-accent); }

    /* Separator (top edge of panels) */
    .has-separator::before {
      content: ''; display: block; position: sticky; top: 0; left: 0;  height: 1px;
      background: var(--separator); margin-bottom: var(--sp-2);
    }

    /* Viewport list */
    #viewport-list {
      position: fixed; left: 0; right: 0; z-index: 999;
      overflow-x: auto; overflow-y: visible;
      -webkit-overflow-scrolling: touch; scrollbar-width: none;
      white-space: nowrap; padding: 0 var(--sp-4) var(--sp-2);
      background: var(--color-surface);
      display: none;
    }
    #viewport-list::-webkit-scrollbar { display: none; }
    #viewport-list.visible { display: block; }

    .vp-item {
      display: inline-flex; flex-direction: column; align-items: center;
      width: 76px; padding: var(--sp-3) var(--sp-2);
      border-radius: var(--r-lg); cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      vertical-align: top; white-space: normal; text-align: center;
      border: none; background: none; font-family: var(--font);
    }
    .vp-item:hover { background: var(--fill-secondary); }
    .vp-item:active { background: var(--fill); }
    .vp-item.selected { background: var(--accent-bg); }
    .vp-item.selected .vp-name { color: var(--accent); }
    .vp-time {
      font-size: var(--fs-caption3); font-weight: 600; color: var(--accent);
      margin-bottom: var(--sp-1); white-space: nowrap; line-height: 1;
      letter-spacing: 0.1px;
    }
    .vp-dot { width: 10px; height: 10px; border-radius: var(--r-full); margin-bottom: var(--sp-1); }
    .vp-name {
      font-size: var(--fs-caption2); font-weight: 500;
      color: var(--text-primary); line-height: 1.2;
      display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
      overflow: hidden; text-overflow: ellipsis; word-break: break-word;
    }
    .vp-sub {
      font-size: var(--fs-caption3); color: var(--text-tertiary); line-height: 1.2;
      margin-top: 2px; white-space: nowrap; overflow: hidden;
      text-overflow: ellipsis; max-width: 100%; font-weight: 400;
    }

    /* Detail panel */
    #detail-panel {
      position: fixed; left: 0; right: 0; z-index: 1001;
      background: var(--color-surface);
      padding: 0 var(--sp-4) calc(var(--sp-4) + var(--sab));
      display: none; overflow-y: auto; max-height: 45vh;
    }
    #detail-panel.visible { display: block; }

    .detail-header {
      display: flex; align-items: flex-start;
      justify-content: space-between; gap: var(--sp-3);
    }
    .detail-info { flex: 1; min-width: 0; }
    .tipo-badge {
      display: inline-block; font-size: var(--fs-caption3); font-weight: 600;
      text-transform: uppercase; letter-spacing: 0.4px;
      margin-bottom: var(--sp-1); padding: 2px var(--sp-2); border-radius: var(--sp-1);
    }
    #detail-panel h2 {
      font-size: var(--fs-body); font-weight: 600;
      margin-bottom: 2px; line-height: 1.25; letter-spacing: -0.2px;
    }
    .detail-bairro {
      font-size: var(--fs-footnote); color: var(--text-tertiary);
      margin-bottom: var(--sp-3); font-weight: 400;
    }
    .detail-meta {
      display: flex; flex-wrap: wrap; gap: var(--sp-1) var(--sp-4);
      font-size: var(--fs-footnote); color: var(--text-primary);
    }
    .detail-meta span { display: inline-flex; align-items: center; gap: var(--sp-1); }
    .detail-meta .label { color: var(--text-tertiary); font-weight: 500; }
    .detail-actions { display: flex; gap: var(--sp-2); margin-top: var(--sp-3); flex-wrap: wrap; }
    .detail-actions button {
      display: inline-flex; align-items: center; gap: var(--sp-2);
      padding: var(--sp-3) var(--sp-5); border: none; min-height: 44px;
      font-family: var(--font); font-size: var(--fs-footnote); font-weight: 600;
      border-radius: var(--r-full); cursor: pointer;
      -webkit-tap-highlight-color: transparent;
    }
    #btn-route { background: var(--accent); color: var(--text-on-accent); }
    #btn-route:hover { filter: brightness(1.08); }
    #btn-route.active { background: var(--success); }
    #btn-route:disabled { opacity: 0.5; cursor: not-allowed; }
    #btn-calendar { background: var(--fill-secondary); color: var(--text-primary); }
    #btn-calendar:hover { background: var(--fill); }
    #btn-gmaps { background: var(--fill-secondary); color: var(--text-primary); }
    #btn-gmaps:hover { background: var(--fill); }

    /* Count badge */
    #bloco-count {
      position: fixed; bottom: calc(var(--sp-3) + var(--sab)); left: calc(var(--sp-3) + var(--sal));
      z-index: 1000; background: var(--color-surface);
      padding: var(--sp-2) var(--sp-3); border-radius: var(--r-full);
      font-size: var(--fs-caption1); font-weight: 600; color: var(--text-primary);
    }

    /* Leaflet overrides */
    .bloco-marker { background: none !important; border: none !important; }
    .bloco-tooltip {
      background: var(--tooltip-bg);
      border: none; border-radius: var(--r-sm); padding: var(--sp-1) var(--sp-2);
      font-size: var(--fs-caption3); font-weight: 600; color: var(--text-primary); white-space: nowrap;
    }
    .bloco-tooltip::before { display: none; }
    .custom-cluster { background: none !important; border: none !important; }
    .cluster-icon {
      width: 38px; height: 38px; background: var(--accent);
      color: var(--text-on-accent); border-radius: var(--r-full);
      display: flex; align-items: center; justify-content: center;
      font-size: var(--fs-caption1); font-weight: 700;
    }
    .leaflet-control-zoom {
      border: none !important; box-shadow: none !important;
      border-radius: var(--r-md) !important; overflow: hidden;
      margin-right: calc(10px + var(--sar)) !important;
    }
    .leaflet-control-zoom a {
      width: 44px !important; height: 44px !important; line-height: 44px !important;
      font-size: 20px !important; color: var(--accent) !important;
      background: var(--color-surface) !important;
    }
    @media (prefers-color-scheme: dark) {
      .leaflet-control-attribution {
        background: #000000 !important; color: var(--text-tertiary) !important;
      }
      .leaflet-control-attribution a { color: var(--accent) !important; }
    }

    /* User location pulse */
    @keyframes pulse-ring {
      0% { transform: translate(-50%, -50%) scale(1); opacity: 0.35; }
      100% { transform: translate(-50%, -50%) scale(4); opacity: 0; }
    }
    .user-pulse-container { position: relative; width: 100%; height: 100%; }
    .user-ring-inner {
      position: absolute; top: 50%; left: 50%; width: 22px; height: 22px;
      background: rgba(0, 122, 255, 0.2); border-radius: 50%;
      transform: translate(-50%, -50%); animation: pulse-ring 1.5s ease-out infinite;
    }
    .user-ring-outer {
      position: absolute; top: 50%; left: 50%; width: 22px; height: 22px;
      background: rgba(0, 122, 255, 0.1); border-radius: 50%;
      transform: translate(-50%, -50%); animation: pulse-ring 2.5s ease-out infinite;
      animation-delay: 0.4s;
    }

    /* Empty state */
    .empty-state {
      display: none; position: fixed; top: 50%; left: 50%;
      transform: translate(-50%, -50%); z-index: 500; text-align: center;
      color: var(--text-tertiary); font-size: var(--fs-subhead); font-weight: 500;
      padding: var(--sp-4);
    }
    .empty-state.visible { display: flex; flex-direction: column; align-items: center; gap: var(--sp-2); }
    .empty-state svg { width: 32px; height: 32px; opacity: 0.4; }
    .empty-state .empty-hint {
      font-size: var(--fs-footnote); font-weight: 400; margin-top: var(--sp-1);
    }

    /* SEO fallback section (visible only without JS) */
    #seo-blocos {
      padding: var(--sp-4); max-width: 640px; margin: 0 auto;
      font-family: var(--font); color: var(--text-primary); background: var(--color-bg);
    }
    #seo-blocos h2 { font-size: var(--fs-title3); font-weight: 700; margin-bottom: var(--sp-3); }
    #seo-blocos h3 { font-size: var(--fs-body); font-weight: 600; margin: var(--sp-4) 0 var(--sp-2); }
    #seo-blocos p { font-size: var(--fs-subhead); color: var(--text-secondary); margin-bottom: var(--sp-3); line-height: 1.5; }
    #seo-blocos ul { list-style: none; }
    #seo-blocos li { font-size: var(--fs-footnote); padding: var(--sp-2) 0; border-bottom: 1px solid var(--separator); line-height: 1.4; }
    .js #seo-blocos { display: none; }
  </style>
</head>
<body>
  <a href="#map" class="skip-link">Pular para o mapa</a>

  <!-- All chrome (header + filters) in one container for clean stacking -->
  <div id="chrome" role="banner">
    <header class="header">
      <h1>Carnaval SP 2026</h1>
      <div class="header-actions">
        <button id="btn-locate" class="icon-btn" aria-label="Mostrar minha localiza√ß√£o no mapa">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"/></svg>
        </button>
      </div>
    </header>

    <div id="type-filter" class="filter-row" role="toolbar" aria-label="Filtrar por tipo de bloco"></div>
    <nav id="date-filter" class="filter-row" role="toolbar" aria-label="Filtrar por data"></nav>
  </div>

  <div id="viewport-list" class="has-separator" role="list" aria-label="Blocos vis√≠veis no mapa"></div>

  <section id="detail-panel" class="has-separator" role="dialog" aria-label="Detalhes do bloco" aria-hidden="true">
    <div id="detail-content"></div>
  </section>

  <main>
    <div id="map" role="application" aria-label="Mapa interativo de blocos de carnaval"></div>
  </main>

  <div id="bloco-count" role="status" aria-live="polite"></div>
  <div id="empty-state" class="empty-state" role="status" aria-live="polite">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"/></svg>
    <span>Nenhum bloco encontrado</span>
    <span class="empty-hint">Tente mudar a data ou ativar mais tipos</span>
  </div>

  <section id="seo-blocos">
    <h2>Programa√ß√£o Completa ‚Äî Carnaval de Rua SP 2026</h2>
    <p>S√£o Paulo ter√° 327+ blocos de carnaval de rua em 2026, com desfiles de 06 de fevereiro a 22 de fevereiro. Confira a programa√ß√£o completa com datas, hor√°rios e locais de concentra√ß√£o.</p>
    <h3>Sexta-feira, 06/02</h3>
    <ul>
      <li><strong>O Pinto do Visconde</strong> ‚Äî Br√°s, 17:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Banda Bantat√£ Folia</strong> ‚Äî Butant√£, 20:00‚Äì22:00 (Tradicional)</li>
    </ul>
    <h3>S√°bado, 07/02</h3>
    <ul>
      <li><strong>Quem Pede, Pede, com Ivete Sangalo</strong> ‚Äî Parque Ibirapuera, 09:00‚Äì13:00 (Megabloco)</li>
      <li><strong>Bloco El√°stico</strong> ‚Äî Vila Mariana, 10:00‚Äì15:00 (Tradicional)</li>
      <li><strong>Carnafacul - Quem Pede, Pede</strong> ‚Äî Vila Mariana, 10:00‚Äì14:00 (Megabloco)</li>
      <li><strong>Doentes da Sapuca√≠ KIDS</strong> ‚Äî Vila Mariana, 10:00‚Äì13:00 (Tradicional)</li>
      <li><strong>Bloco Sargento Pimenta</strong> ‚Äî Pinheiros, 12:00‚Äì16:00 (Rock)</li>
      <li><strong>Bloco do Abrava</strong> ‚Äî Itaim Bibi, 12:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Bel√©m Bel√©m Agora eu To de Bem</strong> ‚Äî Mooca, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco de Rua Pode Entrar</strong> ‚Äî Parque S√£o Louren√ßo, 13:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Forrozin</strong> ‚Äî Vila Mariana, 13:00‚Äì15:00 (Tradicional)</li>
      <li><strong>Associa√ß√£o Bloco Carnavalesco √Ågua Ardente</strong> ‚Äî Vila Palmeiras, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Batucada de Nego V√©io, Velha Guarda de Bambas</strong> ‚Äî Vila Esperan√ßa, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bicho Maluco Beleza, com Alceu Valen√ßa</strong> ‚Äî Vila Mariana, 14:00‚Äì18:00 (Megabloco)</li>
      <li><strong>Bloco Balaco Baco</strong> ‚Äî Itaim Bibi, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Cacique Social Club</strong> ‚Äî Penha da Fran√ßa, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Caldeir√£o Sem Fundo</strong> ‚Äî Parque Edu Chaves, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Carnavalesco Lule</strong> ‚Äî Vila Palmeiras, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco da Bene!</strong> ‚Äî Vila Invernada, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Onze</strong> ‚Äî Ipiranga, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Rock SP</strong> ‚Äî Pinheiros, 14:00‚Äì18:00 (Rock)</li>
      <li><strong>Bloco dos Trancos</strong> ‚Äî Parque S√£o Jorge, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Doentes da Sapuca√≠</strong> ‚Äî Vila Mariana, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Espirituosos do Largo Nossa Senhora do Bom Parto</strong> ‚Äî Vila Gomes Cardim, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Gr√™mio Recreativo e Cultural do Imirim Br√°s Pereira Banda Show</strong> ‚Äî Imirim, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Instituto Cultural e Bloco Carnavalesco Renascer</strong> ‚Äî Parque S√£o Louren√ßo, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Vamo Que Vai Ser Legal!</strong> ‚Äî Pinheiros, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>A Bruxa t√° Solta</strong> ‚Äî Vila Isolina Mazzei, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Pedra no Rim</strong> ‚Äî Mooca, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Pracinha</strong> ‚Äî Santa Terezinha, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco cal√ßada do Samba do Jd. Almanara</strong> ‚Äî Freguesia/Brasil√¢ndia, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloquinho Altitude</strong> ‚Äî Vila Monumento, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Cord√£o do Congo</strong> ‚Äî Jardim Maristela, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Perdendo a Linha</strong> ‚Äî Jardim Scyntila, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Batuca - Bresser</strong> ‚Äî Mooca, 16:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Ressaca do Cambuci</strong> ‚Äî Cambuci, 16:00‚Äì20:00 (Tradicional)</li>
      <li><strong>Bloco Turma do Funil Vila Mariana</strong> ‚Äî Vila Clementino, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Carnacol Folia</strong> ‚Äî Vila Marilena, 17:00‚Äì18:00 (Tradicional)</li>
    </ul>
    <h3>Domingo, 08/02</h3>
    <ul>
      <li><strong>Bloquinho Infantil Fraldinha Molhada</strong> ‚Äî Jardim An√°lia Franco, 09:00‚Äì13:00 (Tradicional)</li>
      <li><strong>Bloco Tatuzinho</strong> ‚Äî Vila Carr√£o, 10:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Bloquinho Infantil Maria Maluquinha</strong> ‚Äî Ipiranga, 10:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Bloco Skol, com Calvin Harris</strong> ‚Äî Consola√ß√£o, 11:00‚Äì17:00 (Megabloco)</li>
      <li><strong>Bloco Carnamauri</strong> ‚Äî Jardim Europa, 12:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Bloco do √≥</strong> ‚Äî Pinheiros, 12:00‚Äì15:00 (Tradicional)</li>
      <li><strong>Cord√£o Carnavalesco Confraria do Pasmado</strong> ‚Äî Pinheiros, 12:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Bloco #VemDan√ßar</strong> ‚Äî Imirim, 13:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Cord√£o Carnavalesco da Dona Micaela</strong> ‚Äî Penha da Fran√ßa, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>PHOLIA 2026</strong> ‚Äî Itaim Bibi, 13:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Quintal dos Pretos</strong> ‚Äî Vila Mariana, 13:00‚Äì16:00 (Afro)</li>
      <li><strong>Adega do Miro</strong> ‚Äî Parque Peruche, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Em Cima da Hora Futebol e Samba</strong> ‚Äî Lim√£o, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Folia Sem Fim</strong> ‚Äî S√£o Jo√£o Cl√≠maco, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Luzi√¢nia</strong> ‚Äî Jardim Nordeste, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Nois Trupica Mas n√£o Cai</strong> ‚Äî Pinheiros, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco de P√≠fanos de S√£o Paulo</strong> ‚Äî Planalto Paulista, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Chuvisco</strong> ‚Äî Pinheiros, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Tins e Bens e Tais</strong> ‚Äî Vila Madalena, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Boca (Antigo Bloco Boca de Veludo)</strong> ‚Äî Itaim Bibi, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Feminista</strong> ‚Äî Vila Perus, 15:00‚Äì18:00 (LGBTQIA+)</li>
      <li><strong>Bloco Solteiro n√£o Trai</strong> ‚Äî Pinheiros, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Eug√™nio - Ca√ßa e Ca√ßador</strong> ‚Äî Pinheiros, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Fico</strong> ‚Äî Ipiranga, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Juiz - Imperador</strong> ‚Äî Cidade Patriarca, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Paulic√©ia</strong> ‚Äî Parada Inglesa, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Gr√™mio Recreativo Bloco do Policarpo Maluco</strong> ‚Äî City Am√©rica, 15:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Afro Ax√© Kalifa</strong> ‚Äî Cidade Tiradentes, 16:00‚Äì18:00 (Afro)</li>
      <li><strong>Bloco Gal To Tal</strong> ‚Äî Butant√£, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Jatob√°</strong> ‚Äî Conjunto Residencial Jos√© Bonif√°cio, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Burburinho</strong> ‚Äî Vila Ol√≠mpia, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Monobloco</strong> ‚Äî Vila Mariana, 16:00‚Äì18:00 (Megabloco)</li>
      <li><strong>Amigos da Fiel Tiradentes</strong> ‚Äî Cidade Tiradentes, 17:00‚Äì18:00 (Tradicional)</li>
    </ul>
    <h3>Segunda-feira, 09/02</h3>
    <ul>
      <li><strong>Banda Redonda</strong> ‚Äî Vila Buarque, 20:00‚Äì23:00 (Tradicional)</li>
    </ul>
    <h3>Ter√ßa-feira, 10/02</h3>
    <ul>
      <li><strong>Bloco UMES Caraspintadas</strong> ‚Äî Bela Vista, 19:00‚Äì22:00 (Tradicional)</li>
    </ul>
    <h3>Quarta-feira, 11/02</h3>
    <ul>
      <li><strong>Banda do Candinho</strong> ‚Äî Bela Vista, 21:00‚Äì00:00 (Tradicional)</li>
    </ul>
    <h3>S√°bado, 14/02</h3>
    <ul>
      <li><strong>Bloco Flor do Desejo</strong> ‚Äî Lapa, 09:00 (Tradicional)</li>
      <li><strong>Bloco Me Viram no Ipiranga</strong> ‚Äî Ipiranga, 09:00 (Tradicional)</li>
      <li><strong>Unidos da Vila</strong> ‚Äî Vila Matilde, 09:00 (Tradicional)</li>
      <li><strong>Besame Mucho</strong> ‚Äî Itaim Bibi, 10:00 (Tradicional)</li>
      <li><strong>Bloco Vai Que Cola</strong> ‚Äî Centro Hist√≥rico, 10:00 (Tradicional)</li>
      <li><strong>Bloco dos Banc√°rios</strong> ‚Äî Centro Hist√≥rico, 10:00 (Tradicional)</li>
      <li><strong>C.U.N.T. Brasil</strong> ‚Äî Pinheiros, 10:00‚Äì15:00 (LGBTQIA+)</li>
      <li><strong>Acad√™micos do Gato Mia</strong> ‚Äî Lapa, 11:00 (Tradicional)</li>
      <li><strong>Bloco Amorikids</strong> ‚Äî Vila Mariana, 11:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Bloco Vem Quem Quer</strong> ‚Äî Vila Ol√≠mpia, 11:00 (Tradicional)</li>
      <li><strong>Bloco da Lisa 2026</strong> ‚Äî Consola√ß√£o, 11:00 (Tradicional)</li>
      <li><strong>TREZEROOTS</strong> ‚Äî Jardim Jap√£o, 11:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Tarado Ni Voc√™</strong> ‚Äî Centro, 11:00 (Tradicional)</li>
      <li><strong>Bloco dos Coleira</strong> ‚Äî Freguesia do √ì, 12:00 (Tradicional)</li>
      <li><strong>S√≥ pra ter o que fazer</strong> ‚Äî Freguesia do √ì, 12:00 (Tradicional)</li>
      <li><strong>Bloco do Boi</strong> ‚Äî Mooca, 12:10 (Tradicional)</li>
      <li><strong>CarNaFest</strong> ‚Äî S√£o Mateus, 12:20 (Tradicional)</li>
      <li><strong>Acad√™micos do Baixo Augusta</strong> ‚Äî Consola√ß√£o, 13:00 (Tradicional)</li>
      <li><strong>Agrada Gregos / TikTok (Gloria Groove)</strong> ‚Äî Ibirapuera, 13:00‚Äì18:00 (Megabloco)</li>
      <li><strong>BLOCO DO ZIRIGUIDUM</strong> ‚Äî Sumarezinho, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Bastardo</strong> ‚Äî Pinheiros, 13:00 (Tradicional)</li>
      <li><strong>Bloco Bateria de Rua</strong> ‚Äî Itaim Bibi, 13:00 (Tradicional)</li>
      <li><strong>Bloco Beat Loko</strong> ‚Äî Barra Funda, 13:00 (Tradicional)</li>
      <li><strong>Bloco Chama o S√≠ndico</strong> ‚Äî Butant√£, 13:00 (Tradicional)</li>
      <li><strong>Bloco Emo</strong> ‚Äî Sumarezinho, 13:00 (Rock)</li>
      <li><strong>Bloco Jo√£o de Barro</strong> ‚Äî Vila Matilde, 13:00 (Tradicional)</li>
      <li><strong>Bloco Pira Jussara</strong> ‚Äî Butant√£, 13:00 (Tradicional)</li>
      <li><strong>Bloco Siga La Pelota</strong> ‚Äî Vila Mariana, 13:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Bloco Urub√≥</strong> ‚Äî Freguesia do √ì, 13:00 (Tradicional)</li>
      <li><strong>Bloco do Adorno</strong> ‚Äî Lapa, 13:00 (Tradicional)</li>
      <li><strong>Bloco do Galo</strong> ‚Äî Pomp√©ia, 13:00 (Tradicional)</li>
      <li><strong>Bloco do Gato Preto</strong> ‚Äî Ipiranga, 13:00 (Tradicional)</li>
      <li><strong>Bloco √Åfrica Viva</strong> ‚Äî Vila Mariana, 13:00 (Afro)</li>
      <li><strong>Boca 36</strong> ‚Äî Tatuap√©, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Cachorro Caramelo</strong> ‚Äî Ipiranga, 13:00 (Tradicional)</li>
      <li><strong>Carna Lau</strong> ‚Äî Vila Mariana, 13:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Jegue El√©trico SP</strong> ‚Äî Pinheiros, 13:00 (Tradicional)</li>
      <li><strong>MinhoQueens</strong> ‚Äî Rep√∫blica, 13:00 (LGBTQIA+)</li>
      <li><strong>Torcidatoatoa</strong> ‚Äî Vila S√¥nia, 13:00 (Tradicional)</li>
      <li><strong>Bloco Carnavalesco Granada</strong> ‚Äî Itaquera, 14:00 (Tradicional)</li>
      <li><strong>Bloco Diquebra</strong> ‚Äî Rep√∫blica, 14:00 (Tradicional)</li>
      <li><strong>Bloco Forr√≥terapia</strong> ‚Äî S√£o Miguel Paulista, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco de Rua - Carnaval de Quebrada</strong> ‚Äî Penha de Fran√ßa, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco do Bob</strong> ‚Äî Ipiranga, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco dos Sueltos</strong> ‚Äî Tatuap√©, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco dos Zattrevidos</strong> ‚Äî Itaquera, 14:00 (Tradicional)</li>
      <li><strong>Esquerda Ligera</strong> ‚Äî Pinheiros, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Siga Bem Caminhoneira</strong> ‚Äî Rep√∫blica, 14:00 (LGBTQIA+)</li>
      <li><strong>Forr√≥ de Todos</strong> ‚Äî Jardim Jap√£o, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Grupo √© Floyd</strong> ‚Äî Vila Mariana, 15:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Gr√™mio Recreativo Cultural Bloco de Samba Vamo q Vamo</strong> ‚Äî Jardim S√£o Vicente, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Mano Veio e Mano novo</strong> ‚Äî S√£o Miguel Paulista, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Gringol√¥co</strong> ‚Äî Pinheiros, 16:00 (Tradicional)</li>
      <li><strong>Bloco Amoribunda</strong> ‚Äî Vila Mariana, 17:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Banda do Trem El√©trico</strong> ‚Äî Consola√ß√£o, 18:00 (Tradicional)</li>
      <li><strong>Bloco Afro Il√∫ Ob√° De Min</strong> ‚Äî Rep√∫blica, 19:00 (Afro)</li>
    </ul>
    <h3>Domingo, 15/02</h3>
    <ul>
      <li><strong>Bloco Saia de Chita</strong> ‚Äî Vila Romana, 08:00 (Tradicional)</li>
      <li><strong>Bloco Acorda Madalena</strong> ‚Äî Vila Madalena, 10:00 (Tradicional)</li>
      <li><strong>Bloco do Helipa</strong> ‚Äî Sacom√£, 10:00 (Tradicional)</li>
      <li><strong>Bloquinho dos pequenos Joaquins</strong> ‚Äî Vila Mariana, 10:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Acad√™micos da Barra Funda</strong> ‚Äî Barra Funda, 11:00 (Tradicional)</li>
      <li><strong>Bloco Da Priscille</strong> ‚Äî Itaim Bibi, 11:00‚Äì15:00 (Tradicional)</li>
      <li><strong>Bloco T√° Suavi</strong> ‚Äî Tatuap√©, 11:00 (Tradicional)</li>
      <li><strong>Sertanejinho do Tel√≥ (Michel Tel√≥)</strong> ‚Äî Ibirapuera, 11:00‚Äì16:00 (Megabloco)</li>
      <li><strong>Ber√ßo El√©trico</strong> ‚Äî Vila Mariana, 12:00‚Äì15:00 (Tradicional)</li>
      <li><strong>Bloco Bem Sertanejo (Michel Tel√≥)</strong> ‚Äî Vila Mariana, 12:00‚Äì16:00 (Megabloco)</li>
      <li><strong>Bloco Ritaleena</strong> ‚Äî Santo Amaro, 12:00 (Tradicional)</li>
      <li><strong>Bloco do Temperadinho</strong> ‚Äî Cangaiba, 12:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Bloco 89 (Supla)</strong> ‚Äî Itaim Bibi, 13:00‚Äì18:00 (Rock)</li>
      <li><strong>Bloco Carnavalesco Cultural Caramba do Caramba</strong> ‚Äî Itaim Paulista, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Presidente</strong> ‚Äî Barra Funda, 13:00 (Tradicional)</li>
      <li><strong>Bloco da Pocah</strong> ‚Äî Ibirapuera, 13:00‚Äì18:00 (Megabloco)</li>
      <li><strong>Vai Quadricular</strong> ‚Äî Perdizes, 13:00 (Tradicional)</li>
      <li><strong>Bloco 89</strong> ‚Äî Itaim Bibi, 14:00‚Äì18:00 (Megabloco)</li>
      <li><strong>Bloco da Cambona</strong> ‚Äî Butant√£, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco da periferia</strong> ‚Äî Cangaiba, 14:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Carna GAMF</strong> ‚Äî Vila Gumercindo, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Carna Mooca B√©√©√©√©llo</strong> ‚Äî Belenzinho, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Descaxota</strong> ‚Äî Vila Nova Cachoeirinha, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Deus Me Livre de Fofoca</strong> ‚Äî Jardim Santo Andre, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Moradia e folia ULCM</strong> ‚Äî Br√°s, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>O Bloco Sabbath</strong> ‚Äî Perdizes, 14:00 (Rock)</li>
      <li><strong>S√≥ Chora Quem Ama</strong> ‚Äî Jardim Peri Peri, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Trembala</strong> ‚Äî Vila Carbone, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Unidos Venceremos</strong> ‚Äî Perdizes, 14:00 (Tradicional)</li>
      <li><strong>Zabumbeab√°</strong> ‚Äî Butant√£, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Afox√© Omi Aiye</strong> ‚Äî Ermelino Matarazzo, 15:00‚Äì18:00 (Afro)</li>
      <li><strong>BLOCO CARNAVALESCO Z√â DA ESKINA</strong> ‚Äî Jardim Santo Elias, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco da Joaquim</strong> ‚Äî Vila Mariana, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Juiz - Patriarca</strong> ‚Äî Cidade Patriarca, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Piracema Desvairada</strong> ‚Äî Pomp√©ia, 15:00 (Tradicional)</li>
      <li><strong>Bloco Comunidade 100% Iracema</strong> ‚Äî Parque Sao Luis, 17:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Partideiros do Maria Z√©lia</strong> ‚Äî Br√°s, 17:00‚Äì18:00 (Tradicional)</li>
    </ul>
    <h3>Segunda-feira, 16/02</h3>
    <ul>
      <li><strong>Bloco Me Viram no Ipiranga</strong> ‚Äî Ipiranga, 09:00 (Tradicional)</li>
      <li><strong>Bloco Me Lembra Que Eu Vou</strong> ‚Äî Pinheiros, 10:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Bloco do Escoc√™s</strong> ‚Äî Pinheiros, 10:00‚Äì13:00 (Tradicional)</li>
      <li><strong>Bloco do Forr√≥ da Taylor</strong> ‚Äî Pinheiros, 10:00‚Äì13:00 (Tradicional)</li>
      <li><strong>Bloco do Pit√©u</strong> ‚Äî Perdizes, 10:00‚Äì14:00 (Tradicional)</li>
      <li><strong>O Espetacular Bloco da Charanga do Fran√ßa</strong> ‚Äî Vila Buarque, 10:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Bloc√£o do Toto &amp; Ruby Fofa</strong> ‚Äî Indian√≥polis, 11:00‚Äì12:00 (Tradicional)</li>
      <li><strong>Ano Passado Eu Morri mas Esse Ano Eu n√£o Morro</strong> ‚Äî Lapa, 12:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Bloco GoFun Experience</strong> ‚Äî Itaim Bibi, 12:00‚Äì16:00 (Tradicional)</li>
      <li><strong>MistoQuente</strong> ‚Äî Consola√ß√£o, 12:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Bloco MPBebados</strong> ‚Äî Pinheiros, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Vou de T√°xi</strong> ‚Äî Vila Mariana, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco da Pabllo (Pabllo Vittar)</strong> ‚Äî Ibirapuera, 13:00‚Äì18:00 (Megabloco)</li>
      <li><strong>Bota pra Ferver</strong> ‚Äî Consola√ß√£o, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Cachorro Caramelo</strong> ‚Äî Ipiranga, 13:00 (Tradicional)</li>
      <li><strong>Somos Todos Carmen</strong> ‚Äî Vila Buarque, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Dr√© Tarde</strong> ‚Äî Itaim Bibi, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Esfarrapado</strong> ‚Äî Bela Vista, 14:00‚Äì20:00 (Tradicional)</li>
      <li><strong>Bloco Eu Sou do Ax√©</strong> ‚Äî Consola√ß√£o, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco NaMiuda</strong> ‚Äî Perdizes, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Percussivo AYO</strong> ‚Äî Vila Miriam, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Sudaca</strong> ‚Äî Bela Vista, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Bartant√£</strong> ‚Äî Vila Pirajussara, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Futuro</strong> ‚Äî Pinheiros, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Ma√ß√£</strong> ‚Äî Vila Guilherme, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Salve</strong> ‚Äî Guapira, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Cord√£o Carnavalesco Cama e Caf√©</strong> ‚Äî S√©, 14:00‚Äì16:00 (Tradicional)</li>
      <li><strong>FitDance</strong> ‚Äî Vila Mariana, 14:00‚Äì17:00 (Megabloco)</li>
      <li><strong>Sangue Novo</strong> ‚Äî Vila Mariana, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Carnavalesco Estrela de Santa Luzia</strong> ‚Äî Vila Monumento, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bumb√°Bloco</strong> ‚Äî Santana/Tucuruvi, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>N√£o Serve Mestre</strong> ‚Äî Pinheiros, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Vai D√° Boa!</strong> ‚Äî Butant√£, 16:00‚Äì18:00 (Tradicional)</li>
    </ul>
    <h3>Ter√ßa-feira, 17/02</h3>
    <ul>
      <li><strong>Acad√™micos da Cerca Frango</strong> ‚Äî Lapa, 10:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Galo da Madrugada</strong> ‚Äî Vila Mariana, 10:00‚Äì14:00 (Megabloco)</li>
      <li><strong>BLOCO CHIQUE NO URTIMO</strong> ‚Äî Alto de Pinheiros, 12:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Bloco da Latinha Mix</strong> ‚Äî Ibirapuera, 12:00 (Megabloco)</li>
      <li><strong>Bloco Copo Quebrado</strong> ‚Äî Conjunto Habitacional Juscelino Kubitschek, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Urub√≥</strong> ‚Äî Freguesia do √ì, 13:00 (Tradicional)</li>
      <li><strong>Festa de Cores</strong> ‚Äî Perus, 13:00‚Äì14:00 (Tradicional)</li>
      <li><strong>GALO FOLIA</strong> ‚Äî Vila Miriam, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Pil√µes Folia</strong> ‚Äî Ipiranga, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Batucada aben√ßoada</strong> ‚Äî Uni√£o Vila Nova, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Doidin Pra Virar Jacar√©</strong> ‚Äî Ipiranga, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Roda Sertanejah Jatobah</strong> ‚Äî Parque da Mooca, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Pirata</strong> ‚Äî Jardim Peri Peri, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloquinho do Forte</strong> ‚Äî Parque S√£o Louren√ßo, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Chuta Choleros y sus Lindas Mamacitas</strong> ‚Äî Br√°s, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Diversidade Unida</strong> ‚Äî Perus, 14:00‚Äì16:00 (LGBTQIA+)</li>
      <li><strong>Morro da Vila Alpina</strong> ‚Äî Vila Alpina, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Se fui triste n√£o me lembro</strong> ‚Äî Itaim Bibi, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Tradi√ß√£o do Cangaiba</strong> ‚Äî Cangaiba, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Belas &amp; Empreendedoras e Mel'S</strong> ‚Äî Vila Jacu√≠, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Mister Rock</strong> ‚Äî Cidade Patriarca, 15:00‚Äì18:00 (Rock)</li>
      <li><strong>Bloco da ACDEM</strong> ‚Äî Vila Jacu√≠, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Boteco</strong> ‚Äî Vila Feliz, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Turminha do Bem</strong> ‚Äî Perus, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Carnaval de Rua da Vila Matilde - Bloco Banda das Cachorras</strong> ‚Äî Vila Matilde, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Perus Folia</strong> ‚Äî Vila Perus, 17:00‚Äì20:00 (Tradicional)</li>
      <li><strong>Valen√ßa Perus</strong> ‚Äî Vila Perus, 19:00‚Äì22:00 (Tradicional)</li>
    </ul>
    <h3>S√°bado, 21/02</h3>
    <ul>
      <li><strong>Bloco Amiguinhos da Vila Mariana</strong> ‚Äî Vila Mariana, 10:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Bloco Tomojuntinho</strong> ‚Äî Ipiranga, 10:00‚Äì13:00 (Tradicional)</li>
      <li><strong>Abacaxi de Irar√°</strong> ‚Äî Lapa, 11:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Abacaxi de Irar√°</strong> ‚Äî Perdizes, 11:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Bloco Desliga e Vem</strong> ‚Äî Pinheiros, 11:00‚Äì15:00 (Tradicional)</li>
      <li><strong>Bloco Fogo &amp; Paix√£o</strong> ‚Äî Pinheiros, 11:00‚Äì15:00 (Tradicional)</li>
      <li><strong>Bloco do Prazer (bloco da Gal)</strong> ‚Äî Santa Cecilia, 11:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Charanguinha do Fran√ßa</strong> ‚Äî Vila Prudente, 11:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Bloco Praieiro - Jammil</strong> ‚Äî Pinheiros, 12:00‚Äì16:00 (Megabloco)</li>
      <li><strong>Bloco Tomojunto</strong> ‚Äî Ipiranga, 12:00‚Äì16:00 (Tradicional)</li>
      <li><strong>CARNABLACK</strong> ‚Äî Rep√∫blica, 12:00‚Äì16:00 (Afro)</li>
      <li><strong>Investe Ni Mim</strong> ‚Äî Vila Mariana, 12:00‚Äì15:00 (Tradicional)</li>
      <li><strong>N√£o Serve Mestre</strong> ‚Äî Pinheiros, 12:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Bloco Amor e F√©</strong> ‚Äî Santo Amaro, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Carnavalesco Segunda Sem Lei</strong> ‚Äî Imirim, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Dramas de Sapat√£o</strong> ‚Äî Barra Funda, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Praieiro (Jammil)</strong> ‚Äî Pinheiros, 13:00 (Megabloco)</li>
      <li><strong>Bloco Santa Casa</strong> ‚Äî Vila Buarque, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco SeJoga!</strong> ‚Äî Pinheiros, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Velha Guarda Butant√£</strong> ‚Äî Vila Tiradentes, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco da Salete Campari</strong> ‚Äî Consola√ß√£o, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco de Rua A√ß√£o Volunt√°ria</strong> ‚Äî Vila Matilde, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>TRIO SEBAH VIEIRA bloco</strong> ‚Äî Consola√ß√£o, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Tabuleiro</strong> ‚Äî Pinheiros, 13:00‚Äì16:00 (Tradicional)</li>
      <li><strong>Bloco Amigos da Vila Mariana</strong> ‚Äî Vila Mariana, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Carnavalesco Ressaca Do Belo Gole</strong> ‚Äî Vila Bela Alian√ßa, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Meu Santo √© Pop</strong> ‚Äî Rep√∫blica, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Se Te Pego n√£o Te Largo</strong> ‚Äî Pinheiros, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Viva a Paz</strong> ‚Äî Vila Matilde, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Baga√ßa</strong> ‚Äî Lapa, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Coroa</strong> ‚Äî Vila Carioca, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Carnatorrinha 25 - Os Cabecinhas t√£ntricos</strong> ‚Äî Tatuap√©, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Cord√£o do Samba do Bule</strong> ‚Äî Bom Retiro, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Esporte Clube Cultural Social Bloco Unidos de Vila Guarani</strong> ‚Äî Vila Guarani, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>√â Pequeno + Balan√ßa</strong> ‚Äî Penha de Fran√ßa, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>A Ema Gemeu de Canto a Canto</strong> ‚Äî Pinheiros, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>A Ema Gemeu de Canto a Canto</strong> ‚Äî Pinheiros, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Banda Carnavalesca Macaco Cansado</strong> ‚Äî Vila Madalena, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Carnavalesco Cord√£o do Jamel√£o</strong> ‚Äî Bela Vista, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Cec√≠lias e Buarques</strong> ‚Äî Santa Cecilia, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Feminista</strong> ‚Äî Vila Gumercindo, 15:00‚Äì18:00 (LGBTQIA+)</li>
      <li><strong>Bloco Kaya na Gandaia</strong> ‚Äî Brooklin, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco S/A</strong> ‚Äî Butant√£, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Ultra Carnavibe</strong> ‚Äî V√°rzea da Barra Funda, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco do Chiquinho Social Clube</strong> ‚Äî Jardim Maringa, 15:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco do Pedal</strong> ‚Äî Vila Mariana, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Frevo da Vila</strong> ‚Äî Tatuap√©, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Heavy Bloco</strong> ‚Äî Pinheiros, 15:00‚Äì18:00 (Rock)</li>
      <li><strong>Navio Pirata (BaianaSystem)</strong> ‚Äî Ibirapuera, 15:00‚Äì18:00 (Megabloco)</li>
      <li><strong>Ra√≠zes de Casa Verde</strong> ‚Äî Casa Verde, 15:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Te Amo Mas s√≥ Como Amigo</strong> ‚Äî Pinheiros, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Viracopo</strong> ‚Äî Santana, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>BLOCO CARAVIVA</strong> ‚Äî Planalto Paulista, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Fala Comigo bb</strong> ‚Äî Vila Monumento, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Vem Com Que Tem Se N√£o Tem Vem Tamb√©m</strong> ‚Äî Vila S√£o Jos√©, 16:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Viva Pra√ßa!</strong> ‚Äî Parque Continental, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Os Madalena</strong> ‚Äî Pinheiros, 16:00‚Äì18:00 (Tradicional)</li>
    </ul>
    <h3>Domingo, 22/02</h3>
    <ul>
      <li><strong>Bloco do Vietn√£</strong> ‚Äî Vila Santa Catarina, 00:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloquinho Infantil Fraldinha Molhada</strong> ‚Äî Jardim An√°lia Franco, 09:00‚Äì13:00 (Tradicional)</li>
      <li><strong>Vem com o Gigante</strong> ‚Äî Vila Mariana, 10:00‚Äì14:00 (Tradicional)</li>
      <li><strong>Bloco Calor da Rua</strong> ‚Äî Rep√∫blica, 11:00‚Äì15:00 (Tradicional)</li>
      <li><strong>QUILOMBO CULTURAL DE MACUMBARIAS E BLOCO CARNAVALESCO A MACUMBA DA NEGA</strong> ‚Äî Vila Prudente, 11:00‚Äì15:00 (Afro)</li>
      <li><strong>Associa√ß√£o Recreativa e Cultural Bloco Carnavalesco Uni√£o Dos Bairros</strong> ‚Äî Campo Limpo, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Associa√ß√£o Recreativa e Cultural Bloco Carnavalesco Uni√£o Dos Bairros</strong> ‚Äî Campo Limpo, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Revoada de Carnaval</strong> ‚Äî Pinheiros, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Cord√£o Quintal da XIKA</strong> ‚Äî Itaquera, 13:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco Beats</strong> ‚Äî Vila Mariana, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Carnavalesco Arrast√£o da Vila Guarani</strong> ‚Äî Jabaquara, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Carnavalesco Levanta Quem Cai</strong> ‚Äî Vila Salete, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Confraternidade</strong> ‚Äî Moema, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Da Vaca</strong> ‚Äî Ipiranga, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Eco Campos Pholia</strong> ‚Äî Jardim S√£o Joaquim, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Go Fun</strong> ‚Äî Vila Mariana, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Jornada nas Estrelas</strong> ‚Äî Pinheiros, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Meu Amigo Charlie</strong> ‚Äî Vila Ol√≠mpia, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Nega v√©ia</strong> ‚Äî Parque Santo Ant√¥nio, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Quebra A√™</strong> ‚Äî Vila Mariana, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Quebra√™</strong> ‚Äî Pinheiros, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Tatuap√© vem ai</strong> ‚Äî Vila Gomes Cardim, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco carnavalesco s√≥ quem tem problema em casa</strong> ‚Äî Vila Medeiros, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Bloco do Furduncinho</strong> ‚Äî Pinheiros, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>FAVELA CHIC</strong> ‚Äî Vila Esperan√ßa, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>G.r.c.s.e.s. acad√™micos do parque Bristol</strong> ‚Äî Sacom√£, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>I Love Parais√≥polis Skate</strong> ‚Äî Parais√≥polis, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>I Love Parais√≥polis Skate</strong> ‚Äî Campo Limpo, 14:00‚Äì17:00 (Tradicional)</li>
      <li><strong>Imperatriz da Sul</strong> ‚Äî American√≥polis, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Ningu√©m Dorme</strong> ‚Äî Butant√£, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Pipoca da Rainha</strong> ‚Äî Consola√ß√£o, 14:00‚Äì18:00 (Tradicional)</li>
      <li><strong>BLOCO UNI√ÉO</strong> ‚Äî Vila Orat√≥rio, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Evo√© Z√©</strong> ‚Äî Bela Vista, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Jah √©</strong> ‚Äî Parque S√£o Lu√≠s, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Kazunji</strong> ‚Äî Jardim Peri Peri, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Tradi√ß√£o da Parada Inglesa</strong> ‚Äî Jardim S√£o Paulo, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Va Toma Na Cupec√™</strong> ‚Äî Cidade Ademar, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco de P√≠fanos de S√£o Paulo</strong> ‚Äî Vila Madalena, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Filhos de Glande</strong> ‚Äî Pinheiros, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Te Pego no Cantinho</strong> ‚Äî Vila Indiana, 15:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco Carnaval Seu Bebelier</strong> ‚Äî Vila Mascote, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloco da Laluca</strong> ‚Äî Vila Guilhermina, 16:00‚Äì18:00 (Tradicional)</li>
      <li><strong>Bloquinho dos Jatobazinhos</strong> ‚Äî Conjunto Residencial Jos√© Bonif√°cio, 16:00‚Äì18:00 (Tradicional)</li>
    </ul>
  </section>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="blocos.js"></script>
  <script>
    /* ========================================
       CONFIG
       ======================================== */
    var TYPE_COLORS = {
      'Tradicional': '#6366F1',
      'Megabloco':   '#F59E0B',
      'Afro':        '#10B981',
      'Rock':        '#EF4444',
      'LGBTQIA+':    '#EC4899'
    };
    var TYPE_LABELS = {
      'Tradicional': 'Tradicional',
      'Megabloco':   'Megabloco',
      'Afro':        'Afro',
      'Rock':        'Rock',
      'LGBTQIA+':    'LGBTQIA+'
    };
    var TILE_LIGHT = 'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png';
    var TILE_DARK  = 'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png';

    /* ========================================
       UTILS
       ======================================== */
    function hexToRgb(h) {
      return parseInt(h.slice(1, 3), 16) + ',' +
             parseInt(h.slice(3, 5), 16) + ',' +
             parseInt(h.slice(5, 7), 16);
    }

    function getChromeHeight() {
      return document.getElementById('chrome').offsetHeight;
    }

    /* ========================================
       STATE
       ======================================== */
    var map, markerClusterGroup, tileLayer;
    var userMarker = null, userRing = null;
    var activeRoute = null, activeRouteMarkers = [];
    var currentDate = null;
    var activeTypes = new Set(Object.keys(TYPE_COLORS));
    var selectedBloco = null, filteredBlocos = [], vpUpdateTimer = null;
    var isDark = false;

    /* ========================================
       THEME
       ======================================== */
    function setTheme(t) {
      isDark = t === 'dark';
      document.getElementById('meta-theme').content = isDark ? '#000000' : '#ffffff';
      if (tileLayer) tileLayer.setUrl(isDark ? TILE_DARK : TILE_LIGHT);
    }

    function initTheme() {
      var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme:dark)').matches;
      setTheme(prefersDark ? 'dark' : 'light');

      if (window.matchMedia) {
        window.matchMedia('(prefers-color-scheme:dark)').addEventListener('change', function(e) {
          setTheme(e.matches ? 'dark' : 'light');
        });
      }
    }

    /* ========================================
       INIT
       ======================================== */
    function init() {
      initTheme();
      initMap();
      buildTypeFilter();
      buildDateFilter();
      setupEventListeners();
      if (!autoSelectToday()) filterBlocos();
      locateUser(true);
    }

    /* ========================================
       MAP
       ======================================== */
    function initMap() {
      var blocos = BLOCOS_DATA.blocos;
      var lats = blocos.map(function(x) { return x.lat; });
      var lngs = blocos.map(function(x) { return x.lng; });
      var initBounds = blocos.length
        ? L.latLngBounds(
            [Math.min.apply(null, lats), Math.min.apply(null, lngs)],
            [Math.max.apply(null, lats), Math.max.apply(null, lngs)]
          )
        : null;

      map = L.map('map', {
        center: initBounds ? initBounds.getCenter() : [-23.5505, -46.634],
        zoom: 13,
        zoomControl: false,
        attributionControl: true,
        fadeAnimation: false,
        zoomAnimation: false,
        markerZoomAnimation: false
      });

      if (initBounds) {
        map.fitBounds(initBounds, { padding: [50, 50], maxZoom: 15, animate: false });
      }

      L.control.zoom({ position: 'bottomright' }).addTo(map);

      tileLayer = L.tileLayer(isDark ? TILE_DARK : TILE_LIGHT, {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> &copy; <a href="https://carto.com/">CARTO</a>',
        maxZoom: 19
      }).addTo(map);

      markerClusterGroup = L.markerClusterGroup({
        maxClusterRadius: 45,
        spiderfyOnMaxZoom: true,
        showCoverageOnHover: false,
        zoomToBoundsOnClick: true,
        animate: false,
        iconCreateFunction: function(cluster) {
          return L.divIcon({
            html: '<div class="cluster-icon">' + cluster.getChildCount() + '</div>',
            className: 'custom-cluster',
            iconSize: [38, 38]
          });
        }
      });
      map.addLayer(markerClusterGroup);
      map.on('zoomend', updateTooltipVisibility);
    }

    function updateTooltipVisibility() {
      var zoom = map.getZoom();
      var tooltips = document.querySelectorAll('.bloco-tooltip');
      for (var i = 0; i < tooltips.length; i++) {
        tooltips[i].style.display = zoom >= 14 ? '' : 'none';
      }
    }

    function createBlocoIcon(tipo) {
      var color = TYPE_COLORS[tipo] || '#6B7280';
      var size = tipo === 'Megabloco' ? 20 : 14;
      return L.divIcon({
        className: 'bloco-marker',
        html: '<div style="width:' + size + 'px;height:' + size + 'px;background:' + color +
              ';border-radius:50%"></div>',
        iconSize: [size + 4, size + 4],
        iconAnchor: [(size + 4) / 2, (size + 4) / 2]
      });
    }

    /* ========================================
       TYPE FILTER
       ======================================== */
    function buildTypeFilter() {
      var container = document.getElementById('type-filter');
      Object.keys(TYPE_COLORS).forEach(function(tipo) {
        var btn = document.createElement('button');
        btn.className = 'type-chip';
        btn.setAttribute('role', 'switch');
        btn.setAttribute('aria-checked', 'true');
        btn.setAttribute('aria-label', 'Filtro ' + tipo);
        btn.innerHTML = '<span class="dot" style="background:' + TYPE_COLORS[tipo] + '" aria-hidden="true"></span>' + TYPE_LABELS[tipo];
        btn.addEventListener('click', function() { toggleType(tipo, this); });
        container.appendChild(btn);
      });
    }

    function toggleType(tipo, el) {
      if (activeTypes.has(tipo)) {
        activeTypes.delete(tipo);
        el.classList.add('inactive');
        el.setAttribute('aria-checked', 'false');
      } else {
        activeTypes.add(tipo);
        el.classList.remove('inactive');
        el.setAttribute('aria-checked', 'true');
      }
      hideDetail();
      filterBlocos();
    }

    /* ========================================
       DATE FILTER
       ======================================== */
    function buildDateFilter() {
      var dates = [], dateSet = {};
      BLOCOS_DATA.blocos.forEach(function(b) {
        if (!dateSet[b.dia]) {
          dateSet[b.dia] = { dia: b.dia, dia_semana: b.dia_semana, count: 0 };
          dates.push(dateSet[b.dia]);
        }
        dateSet[b.dia].count++;
      });

      dates.sort(function(a, b) {
        var pa = a.dia.split('/'), pb = b.dia.split('/');
        return new Date(+pa[2], +pa[1] - 1, +pa[0]) - new Date(+pb[2], +pb[1] - 1, +pb[0]);
      });

      var container = document.getElementById('date-filter');

      // "Todos" pill
      var allPill = document.createElement('button');
      allPill.className = 'date-pill';
      allPill.setAttribute('aria-pressed', 'true');
      allPill.setAttribute('aria-label', 'Todos os dias, ' + BLOCOS_DATA.blocos.length + ' blocos');
      allPill.dataset.date = '';
      allPill.innerHTML = '<span class="day-name">Todos</span><span class="day-num">' + BLOCOS_DATA.blocos.length + '</span>';
      allPill.addEventListener('click', function() { selectDate(null, this); });
      container.appendChild(allPill);

      dates.forEach(function(d) {
        var pill = document.createElement('button');
        pill.className = 'date-pill';
        pill.setAttribute('aria-pressed', 'false');
        var pts = d.dia.split('/');
        var shortDay = d.dia_semana.substring(0, 3);
        pill.setAttribute('aria-label', d.dia_semana + ', ' + pts[0] + '/' + pts[1] + ', ' + d.count + ' blocos');
        pill.dataset.date = d.dia;
        pill.innerHTML = '<span class="day-name">' + shortDay + '</span><span class="day-num">' + pts[0] + '/' + pts[1] + '</span>';
        pill.addEventListener('click', function() { selectDate(d.dia, this); });
        container.appendChild(pill);
      });
    }

    function selectDate(date, el, instant) {
      currentDate = date;
      var pills = document.querySelectorAll('.date-pill');
      for (var i = 0; i < pills.length; i++) {
        pills[i].setAttribute('aria-pressed', 'false');
      }
      el.setAttribute('aria-pressed', 'true');
      el.scrollIntoView({ behavior: instant ? 'instant' : 'smooth', block: 'nearest', inline: 'center' });
      hideDetail();
      filterBlocos();
    }

    /* ========================================
       FILTER + RENDER
       ======================================== */
    function filterBlocos() {
      markerClusterGroup.clearLayers();
      clearRoute();

      filteredBlocos = BLOCOS_DATA.blocos.filter(function(b) {
        return (currentDate === null || b.dia === currentDate) && activeTypes.has(b.tipo);
      });

      filteredBlocos.forEach(function(bloco) {
        var marker = L.marker([bloco.lat, bloco.lng], { icon: createBlocoIcon(bloco.tipo) });
        marker.bindTooltip(bloco.nome, {
          permanent: true,
          direction: 'right',
          offset: [8, 0],
          className: 'bloco-tooltip'
        });
        marker.on('click', function() {
          showBlocoDetail(bloco);
          map.setView([bloco.lat, bloco.lng], Math.max(map.getZoom(), 15), { animate: false });
        });
        markerClusterGroup.addLayer(marker);
      });

      // Update count
      var countEl = document.getElementById('bloco-count');
      var emptyEl = document.getElementById('empty-state');
      var countText = filteredBlocos.length + ' bloco' + (filteredBlocos.length !== 1 ? 's' : '');
      if (currentDate) {
        var cPts = currentDate.split('/');
        countText += ' \u00b7 ' + cPts[0] + '/' + cPts[1];
      }
      countEl.textContent = countText;

      if (filteredBlocos.length === 0) {
        emptyEl.classList.add('visible');
      } else {
        emptyEl.classList.remove('visible');
        var bounds = L.latLngBounds(filteredBlocos.map(function(b) { return [b.lat, b.lng]; }));
        map.fitBounds(bounds, { padding: [50, 50], maxZoom: 15, animate: false });
      }

      setTimeout(function() {
        updateTooltipVisibility();
        updateViewportList();
      }, 60);
    }

    function autoSelectToday() {
      var now = new Date();
      now.setHours(0, 0, 0, 0);

      // Collect all unique dates and sort them
      var pills = document.querySelectorAll('.date-pill[data-date]');
      var bestPill = null;
      var bestDiff = Infinity;

      for (var i = 0; i < pills.length; i++) {
        var d = pills[i].dataset.date;
        if (!d) continue;
        var pts = d.split('/');
        var dt = new Date(+pts[2], +pts[1] - 1, +pts[0]);
        var diff = dt - now;
        // Prefer today (diff === 0), then nearest future date, then nearest past
        var absDiff = diff >= 0 ? diff : -diff + 1e12;
        if (absDiff < bestDiff) {
          bestDiff = absDiff;
          bestPill = pills[i];
        }
      }

      if (bestPill) {
        selectDate(bestPill.dataset.date, bestPill, true);
        return true;
      }
      return false;
    }

    /* ========================================
       DETAIL PANEL
       ======================================== */
    function showBlocoDetail(bloco) {
      selectedBloco = bloco;
      var content = document.getElementById('detail-content');
      var panel = document.getElementById('detail-panel');
      var color = TYPE_COLORS[bloco.tipo] || '#6B7280';
      var hasRoute = bloco.trajeto_aproximado && bloco.trajeto_aproximado.length > 1;
      var horarioStr = bloco.horario;
      if (bloco.horario_fim) horarioStr += '\u2013' + bloco.horario_fim;
      var pts = bloco.dia.split('/');
      var rgb = hexToRgb(color);

      content.innerHTML =
        '<div class="detail-header">' +
          '<div class="detail-info">' +
            '<span class="tipo-badge" style="color:' + color + ';background:rgba(' + rgb + ',' + (isDark ? '0.2' : '0.12') + ')">' + bloco.tipo + '</span>' +
            '<h2>' + bloco.nome + '</h2>' +
            '<p class="detail-bairro">' + bloco.concentracao + ' \u00b7 ' + bloco.bairro + '</p>' +
          '</div>' +
          '<button class="icon-btn" aria-label="Fechar detalhes" onclick="hideDetail()" style="flex-shrink:0">' +
            '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" aria-hidden="true" style="width:16px;height:16px"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>' +
          '</button>' +
        '</div>' +
        '<div class="detail-meta">' +
          '<span><span class="label">' + bloco.dia_semana + '</span> ' + pts[0] + '/' + pts[1] + '</span>' +
          '<span><span class="label">Hora</span> ' + horarioStr + '</span>' +
        '</div>' +
        '<div class="detail-actions">' +
          (hasRoute ? '<button id="btn-route" onclick="toggleRoute()">Ver trajeto <span aria-hidden="true">\u2192</span></button>' : '') +
          '<button id="btn-calendar" onclick="addToCalendar()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" style="width:16px;height:16px"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"/></svg>Calend\u00e1rio</button>' +
          '<button id="btn-gmaps" onclick="openGoogleMaps()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" style="width:16px;height:16px"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"/></svg>Google Maps</button>' +
        '</div>';

      document.getElementById('viewport-list').classList.remove('visible');
      panel.classList.add('visible');
      panel.setAttribute('aria-hidden', 'false');
      panel.style.top = getChromeHeight() + 'px';

      // Focus the close button for keyboard users
      var closeBtn = panel.querySelector('.icon-btn');
      if (closeBtn) closeBtn.focus();
    }

    function hideDetail() {
      var panel = document.getElementById('detail-panel');
      panel.classList.remove('visible');
      panel.setAttribute('aria-hidden', 'true');
      selectedBloco = null;
      clearRoute();
      updateViewportList();
    }

    /* ========================================
       ROUTES
       ======================================== */
    var routeLoading = false;

    function toggleRoute() {
      var btn = document.getElementById('btn-route');
      if (activeRoute) {
        clearRoute();
        if (btn) btn.classList.remove('active');
        return;
      }
      if (routeLoading || !selectedBloco || !selectedBloco.trajeto_aproximado || selectedBloco.trajeto_aproximado.length < 2) return;

      var color = TYPE_COLORS[selectedBloco.tipo] || '#6B7280';
      var wp = selectedBloco.trajeto_aproximado;
      var coords = wp.map(function(p) { return p[1] + ',' + p[0]; }).join(';');

      if (btn) { btn.textContent = 'Carregando...'; btn.disabled = true; }
      routeLoading = true;

      fetch('https://router.project-osrm.org/route/v1/foot/' + coords + '?overview=full&geometries=geojson&steps=false')
        .then(function(r) { return r.json(); })
        .then(function(data) {
          routeLoading = false;
          if (btn) { btn.textContent = 'Ver trajeto \u2192'; btn.disabled = false; }

          if (data.code !== 'Ok' || !data.routes || !data.routes.length) {
            drawFallback(wp, color, btn);
            return;
          }

          activeRoute = L.polyline(
            data.routes[0].geometry.coordinates.map(function(p) { return [p[1], p[0]]; }),
            { color: color, weight: 5, opacity: 0.85, lineCap: 'round', lineJoin: 'round' }
          ).addTo(map);
          addRouteMarkers(wp, color);
          map.fitBounds(activeRoute.getBounds(), { padding: [80, 80], animate: false });
          if (btn) btn.classList.add('active');
        })
        .catch(function() {
          routeLoading = false;
          if (btn) { btn.textContent = 'Ver trajeto \u2192'; btn.disabled = false; }
          drawFallback(wp, color, btn);
        });
    }

    function drawFallback(wp, color, btn) {
      activeRoute = L.polyline(wp, {
        color: color, weight: 4, opacity: 0.85, dashArray: '8,8', lineCap: 'round'
      }).addTo(map);
      addRouteMarkers(wp, color);
      map.fitBounds(activeRoute.getBounds(), { padding: [80, 80], animate: false });
      if (btn) btn.classList.add('active');
    }

    function addRouteMarkers(wp, color) {
      var startMarker = L.circleMarker(wp[0], {
        radius: 8, fillColor: color, fillOpacity: 1, weight: 0
      }).addTo(map);
      startMarker.bindTooltip('Concentra\u00e7\u00e3o', {
        permanent: true, direction: 'top', offset: [0, -10], className: 'bloco-tooltip'
      });
      activeRouteMarkers.push(startMarker);

      var end = wp[wp.length - 1];
      if (end[0] !== wp[0][0] || end[1] !== wp[0][1]) {
        var endMarker = L.circleMarker(end, {
          radius: 6, fillColor: color, fillOpacity: 0.6, weight: 0
        }).addTo(map);
        endMarker.bindTooltip('Fim', {
          permanent: true, direction: 'top', offset: [0, -8], className: 'bloco-tooltip'
        });
        activeRouteMarkers.push(endMarker);
      }
    }

    function clearRoute() {
      if (activeRoute) { map.removeLayer(activeRoute); activeRoute = null; }
      activeRouteMarkers.forEach(function(m) { map.removeLayer(m); });
      activeRouteMarkers = [];
    }

    /* ========================================
       ADD TO CALENDAR
       ======================================== */
    function openGoogleMaps() {
      if (!selectedBloco) return;
      var b = selectedBloco;
      var url = 'https://www.google.com/maps/search/?api=1&query=' + b.lat + ',' + b.lng;
      window.open(url, '_blank');
    }

    function addToCalendar() {
      if (!selectedBloco) return;
      var b = selectedBloco;
      var pts = b.dia.split('/');
      var year = pts[2], month = pts[1], day = pts[0];

      // Start time
      var hStart = b.horario.split(':');
      var dtStart = year + month + day + 'T' + hStart[0] + hStart[1] + '00';

      // End time: use horario_fim if available, otherwise +3h
      var dtEnd;
      if (b.horario_fim) {
        var hEnd = b.horario_fim.split(':');
        dtEnd = year + month + day + 'T' + hEnd[0] + hEnd[1] + '00';
      } else {
        var startDate = new Date(+year, +month - 1, +day, +hStart[0], +hStart[1]);
        startDate.setHours(startDate.getHours() + 3);
        dtEnd = year + month + day + 'T' +
          String(startDate.getHours()).padStart(2, '0') +
          String(startDate.getMinutes()).padStart(2, '0') + '00';
      }

      var title = encodeURIComponent(b.nome + ' - Carnaval SP 2026');
      var location = encodeURIComponent(b.concentracao + ', ' + b.bairro + ', S\u00e3o Paulo');
      var details = encodeURIComponent('Bloco: ' + b.nome + '\nTipo: ' + b.tipo + '\nConcentra\u00e7\u00e3o: ' + b.concentracao);

      // Google Calendar URL
      var googleUrl = 'https://calendar.google.com/calendar/render?action=TEMPLATE' +
        '&text=' + title +
        '&dates=' + dtStart + '/' + dtEnd +
        '&ctz=America/Sao_Paulo' +
        '&location=' + location +
        '&details=' + details;

      // .ics file content (Apple Calendar, Outlook, etc.)
      var ics = [
        'BEGIN:VCALENDAR',
        'VERSION:2.0',
        'PRODID:-//CarnavalSP2026//PT',
        'BEGIN:VEVENT',
        'DTSTART;TZID=America/Sao_Paulo:' + dtStart,
        'DTEND;TZID=America/Sao_Paulo:' + dtEnd,
        'SUMMARY:' + b.nome + ' - Carnaval SP 2026',
        'LOCATION:' + b.concentracao + ', ' + b.bairro + ', S\u00e3o Paulo',
        'DESCRIPTION:Bloco: ' + b.nome + '\\nTipo: ' + b.tipo + '\\nConcentra\u00e7\u00e3o: ' + b.concentracao,
        'END:VEVENT',
        'END:VCALENDAR'
      ].join('\r\n');

      // Detect platform: iOS/macOS ‚Üí .ics, otherwise ‚Üí Google Calendar
      var isApple = /Mac|iPhone|iPad|iPod/.test(navigator.userAgent);

      if (isApple) {
        var blob = new Blob([ics], { type: 'text/calendar;charset=utf-8' });
        var url = URL.createObjectURL(blob);
        var a = document.createElement('a');
        a.href = url;
        a.download = b.nome.replace(/[^a-zA-Z0-9\u00C0-\u017F ]/g, '').replace(/\s+/g, '_') + '.ics';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      } else {
        window.open(googleUrl, '_blank', 'noopener');
      }
    }

    /* ========================================
       GEOLOCATION
       ======================================== */
    function locateUser(silent) {
      var btn = document.getElementById('btn-locate');
      if (!navigator.geolocation) {
        if (!silent) alert('Geolocaliza\u00e7\u00e3o n\u00e3o dispon\u00edvel no seu navegador.');
        return;
      }

      btn.classList.add('active');
      btn.setAttribute('aria-label', 'Localiza√ß√£o ativada');

      navigator.geolocation.getCurrentPosition(
        function(pos) {
          var ll = [pos.coords.latitude, pos.coords.longitude];
          if (userMarker) {
            userMarker.setLatLng(ll);
            userRing.setLatLng(ll);
          } else {
            userRing = L.marker(ll, {
              icon: L.divIcon({
                className: '',
                html: '<div class="user-pulse-container"><div class="user-ring-inner"></div><div class="user-ring-outer"></div></div>',
                iconSize: [100, 100],
                iconAnchor: [50, 50]
              }),
              interactive: false,
              zIndexOffset: 500
            }).addTo(map);
            userMarker = L.circleMarker(ll, {
              radius: 7, fillColor: '#007AFF', fillOpacity: 1, weight: 0
            }).addTo(map);
          }
          map.setView(ll, 15, { animate: false });
        },
        function() {
          btn.classList.remove('active');
          btn.setAttribute('aria-label', 'Mostrar minha localiza√ß√£o no mapa');
          if (!silent) alert('N\u00e3o foi poss\u00edvel obter sua localiza\u00e7\u00e3o. Verifique as permiss\u00f5es do navegador.');
        },
        { enableHighAccuracy: true, timeout: 10000 }
      );
    }

    /* ========================================
       VIEWPORT LIST
       ======================================== */
    function updateViewportList() {
      if (selectedBloco) return;

      var bounds = map.getBounds();
      var chromeH = getChromeHeight();
      var visible = filteredBlocos.filter(function(b) {
        if (!bounds.contains([b.lat, b.lng])) return false;
        var pt = map.latLngToContainerPoint([b.lat, b.lng]);
        return pt.y > chromeH;
      });
      visible.sort(function(a, b) {
        return a.horario < b.horario ? -1 : a.horario > b.horario ? 1 : a.nome.localeCompare(b.nome);
      });

      var container = document.getElementById('viewport-list');
      if (!visible.length) {
        container.classList.remove('visible');
        return;
      }

      var html = '';
      visible.forEach(function(b) {
        var color = TYPE_COLORS[b.tipo] || '#6B7280';
        html += '<button class="vp-item" role="listitem" data-lat="' + b.lat +
                '" data-lng="' + b.lng +
                '" data-nome="' + b.nome.replace(/"/g, '&quot;') +
                '" aria-label="' + b.nome.replace(/"/g, '&quot;') + ', ' + b.bairro + ', ' + b.horario + '">' +
                '<span class="vp-time" aria-hidden="true">' + b.horario + '</span>' +
                '<span class="vp-dot" style="background:' + color + '" aria-hidden="true"></span>' +
                '<span class="vp-name">' + b.nome + '</span>' +
                '<span class="vp-sub">' + b.bairro + '</span>' +
                '</button>';
      });
      container.innerHTML = html;
      container.classList.add('visible');
      container.style.top = getChromeHeight() + 'px';

      var items = container.querySelectorAll('.vp-item');
      for (var i = 0; i < items.length; i++) {
        items[i].addEventListener('click', function() {
          var el = this;
          var lat = parseFloat(el.dataset.lat);
          var lng = parseFloat(el.dataset.lng);
          var nome = el.dataset.nome;
          var bloco = filteredBlocos.find(function(b) {
            return b.lat === lat && b.lng === lng && b.nome === nome;
          });
          if (bloco) {
            for (var j = 0; j < items.length; j++) items[j].classList.remove('selected');
            el.classList.add('selected');
            showBlocoDetail(bloco);
            map.setView([lat, lng], Math.max(map.getZoom(), 15), { animate: false });
          }
        });
      }
    }

    function scheduleViewportUpdate() {
      clearTimeout(vpUpdateTimer);
      vpUpdateTimer = setTimeout(updateViewportList, 150);
    }

    /* ========================================
       EVENT LISTENERS
       ======================================== */
    function setupEventListeners() {
      document.getElementById('btn-locate').addEventListener('click', locateUser);

      map.on('moveend', scheduleViewportUpdate);
      map.on('zoomend', scheduleViewportUpdate);
      map.on('click', function() {
        if (selectedBloco) hideDetail();
      });

      // Close detail panel with Escape
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && selectedBloco) {
          hideDetail();
        }
      });
    }

    /* ========================================
       BOOT
       ======================================== */
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
